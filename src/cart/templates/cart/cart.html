{% extends 'base.html' %}

{% block TITLE %}Cart{% endblock TITLE %}

{% block BODY %}
  
    <form method="post">
        {% csrf_token %}
        {% for book in object.books.all %}
          <p>nazvanie knigi: {{ book.book}}</p>
          
          <p>1 книга: {{ book.book.book_price }}</p>
          
          
          <form action="{% url 'cart:update_item' cart_id=cart.id item_id=book.id %}" method="post">
            {% csrf_token %}
            <input type="number" name="count" min="1" value="{{ book.count }}">
            <input type="hidden" name="item_id" value="{{ book.id }}">
            <button type="submit">Update</button>
          </form>

          <form action="{% url 'cart:remove_item' cart_id=cart.id item_id=book.id %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="item_id" value="{{ book.id }}">
            <button type="submit">Remove</button>
          </form>
          
          <p>-------------------------------</p>
          
        {% endfor %}
        <p>Общая стоимость: {{ object.get_total_price }} BYN</p>
    </form>
    
{% endblock BODY %}